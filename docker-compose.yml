services:
  yahoo2gmail-forwarder:
    build: .
    restart: unless-stopped
    dns:
      - 1.1.1.1
      - 8.8.8.8
    environment:
      - YAHOO_EMAIL=${YAHOO_EMAIL}
      - YAHOO_APP_PASSWORD=${YAHOO_APP_PASSWORD}
      - APP_MASTER_KEY=${APP_MASTER_KEY}
      - GMAIL_OAUTH_CLIENT_ID=${GMAIL_OAUTH_CLIENT_ID}
      - GMAIL_OAUTH_CLIENT_SECRET=${GMAIL_OAUTH_CLIENT_SECRET}
      - GMAIL_OAUTH_REDIRECT_URI=${GMAIL_OAUTH_REDIRECT_URI}
      - SQLITE_PATH=${SQLITE_PATH}
      - YAHOO_IMAP_HOST=${YAHOO_IMAP_HOST}
      - YAHOO_IMAP_PORT=${YAHOO_IMAP_PORT}
      - GMAIL_LABEL=${GMAIL_LABEL}
      - GMAIL_DELIVERY_MODE=${GMAIL_DELIVERY_MODE}
      - DELIVER_TO_INBOX=${DELIVER_TO_INBOX}
      - LOG_LEVEL=${LOG_LEVEL}
      - Y2G_DATA_PATH=${Y2G_DATA_PATH}
      - ADMIN_ENABLED=${ADMIN_ENABLED}
      - ADMIN_HOST=${ADMIN_HOST}
      - ADMIN_PORT=${ADMIN_PORT}
      - PUSHOVER_ENABLED=${PUSHOVER_ENABLED}
      - PUSHOVER_API_TOKEN=${PUSHOVER_API_TOKEN}
      - PUSHOVER_USER_KEY=${PUSHOVER_USER_KEY}
      - PUSHOVER_COOLDOWN_MINUTES=${PUSHOVER_COOLDOWN_MINUTES}
    ports:
      - "8787:8787"
    volumes:
      - ${Y2G_DATA_PATH:-./data}:/data
